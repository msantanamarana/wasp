dist: focal

language: c
os: linux

addons:
  apt:
    sources: 
      - sourceline: 'deb http://apt.llvm.org/focal/ llvm-toolchain-focal-10 main'
        key_urlkey_url: 'https://apt.llvm.org/llvm-snapshot.gpg.key'
      - sourceline: 'ppa:ubuntu-toolchain-r/test'
    update: true
    packages:
      - nasm
      - libcurl4-openssl-dev
      - cmake
      - llvm@10
      - llvm-10-dev
      - clang-10
      - gcc
      - g++
env: 
  - CC=clang-10
    CXX=clang++-10

script: cmake --version && llvm-config --version && make && sudo make install && make smoketest
